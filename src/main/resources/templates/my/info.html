<th:block th:insert="~{/my/layout/header.html}"/>
<script th:inline="javascript">
    window.onload = function() {
        // ID 마스킹
        var originalId = /*[[${list.uid}]]*/ '';
        var maskedId = originalId.substr(0, 3) + "****";
        document.getElementById("maskedId").textContent = maskedId;

        // Name 마스킹
        var originalName = /*[[${list.name}]]*/ '';
        var nameLength = originalName.length;
        var maskedName;

        if (nameLength === 3) {
            maskedName = originalName[0] + '*' + originalName[2];
        } else if (nameLength > 3) {
            var middleIndex = Math.floor(nameLength / 2);
            maskedName = originalName.substr(0, middleIndex - 1) + '**' + originalName.substr(middleIndex + 1);
        } else {
            maskedName = originalName;
        }

        document.getElementById("maskedName").textContent = maskedName;

        // 이메일 분할
        var dbEmail = /*[[${list.email}]]*/ '';
        var parts = dbEmail.split('@');
        document.getElementsByName("email1")[0].value = parts[0];
        document.getElementsByName("email2")[0].value = parts[1];

        // 날짜 형식 변경
        var birthString = /*[[${list.birth}]]*/ '';
        var birthDate = new Date(birthString);
        var formattedBirth = birthDate.getFullYear() + '년 ' + (birthDate.getMonth() + 1) + '월 ' + birthDate.getDate() + '일';
        document.getElementById("formattedBirth").textContent = formattedBirth;

        // 번호 분할
        var phoneNumber = /*[[${list.hp}]]*/ ''; // Thymeleaf 변수를 JavaScript 변수로 가져옴
        var phoneNumberWithoutDash = phoneNumber.replace(/-/g, '');
        var part1 = phoneNumberWithoutDash.substr(0, 3);
        var part2 = phoneNumberWithoutDash.substr(3, 4);
        var part3 = phoneNumberWithoutDash.substr(7);
        document.getElementsByName("hp1")[0].value = part1;
        document.getElementsByName("hp2")[0].value = part2;
        document.getElementsByName("hp3")[0].value = part3;
    }
</script>
            <div class="info">
                <th:block th:insert="~{/my/layout/aside.html}"/>
                    <article>
                        <h3>회원정보 설정</h3>

                        <table>
                            <tr>
                                <td>사용자 ID</td>
                                <td><span id="maskedId"></span></td>
                            </tr>
                            <tr>
                                <td>비밀번호</td>
                                <td>
                                    <button id="btnChangePass">비밀번호 수정</button>
                                </td>
                            </tr>
                            <tr>
                                <td>이름</td>
                                <td><span id="maskedName"></span></td>
                            </tr>
                            <tr>
                                <td>생년월일</td>
                                <td id="formattedBirth"></td>
                            </tr>
                            <tr>
                                <td>E-mail</td>
                                <td>
                                    <input type="text" name="email1" value="chakh101">@
                                    <input type="text" name="email2" value="naver.com">
                                    <select>
                                        <option>직접입력</option>
                                        <option>naver.com</option>
                                        <option>daum.net</option>
                                        <option>gmail.com</option>
                                        <option>nate.com</option>
                                        <option>outlook.com</option>
                                    </select>
                                    <button id="btnChangeEmail">수정하기</button>
                                </td>
                            </tr>
                            <tr>
                                <td>휴대폰</td>
                                <td>
                                    <p class="hp">
                                        <input type="text" name="hp1" value="010"/>-
                                        <input type="text" name="hp2" value="1234"/>-
                                        <input type="text" name="hp3" value="1001"/>
                                        <button id="btnChangeHp">수정하기</button>
                                    </p>
                                </td>
                            </tr>
                            <tr>
                                <td>주소</td>
                                <td>
                                    <input type="text" name="zip"/>
                                    <button id="btnFindZip">주소검색</button>
                                    <p class="address">
                                        <input type="text" name="addr1"/>
                                        <input type="text" name="addr2"/>
                                    </p>
                                </td>
                            </tr>
                            <tr>
                                <td>회원탈퇴</td>
                                <td>
                                    <button id="btnWithdraw">탈퇴하기</button>
                                </td>
                            </tr>
                        </table>
                        <button id="btnInfoChange">수정하기</button>
                    </article>
                </section>

            </div>
        </div>
<th:block th:insert="~{/my/layout/footer.html}"/>